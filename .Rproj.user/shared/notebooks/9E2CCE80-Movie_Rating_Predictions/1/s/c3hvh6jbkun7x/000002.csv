"0","edx <- edx %>% mutate(Year = year(as_datetime(timestamp)))"
"0",""
"0","validation <- validation %>% mutate(Year = year(as_datetime(timestamp)))"
"0",""
"0","movie_avg <-"
"0","  edx %>%"
"0","  group_by(movieId) %>%"
"0","  summarise(b_i = mean(rating - mu),"
"0","            .groups='drop')"
"0",""
"0","user_avg <- edx %>% "
"0","  left_join(movie_avg, by='movieId') %>%"
"0","  group_by(userId) %>%"
"0","  summarize(b_u = mean(rating - mu - b_i))"
"0",""
"0","genre_avg <- edx %>%"
"0","   left_join(movie_avg, by='movieId') %>%"
"0","   left_join(user_avg, by='userId') %>%"
"0","   group_by(genres) %>%"
"0","   summarize(b_g = mean(rating - mu - b_i - b_u))"
"0",""
"0","year_avg <- edx %>% "
"0","  left_join(movie_avg, by='movieId') %>%"
"0","  left_join(user_avg, by='userId') %>%"
"0","  left_join(genre_avg, by='genres') %>%"
"0","  group_by(Year) %>%"
"0","  summarize(b_yr = mean(rating - mu - b_i - b_u - b_g))"
"0",""
"0","model_5 <- validation %>%"
"0","  left_join(movie_avg, by='movieId') %>%"
"0","  left_join(user_avg, by='userId') %>%"
"0","  left_join(genre_avg, by='genres') %>%"
"0","  left_join(year_avg, by='Year') %>%"
"0","  mutate(pred = mu + b_i + b_u + b_g + b_yr) %>%"
"0","  pull(pred)"
"0",""
"0","movie_user_genre_year_rmse <- RMSE(validation$rating, model_5)"
"0","result <- bind_rows(result, "
"0","                    tibble("
"0","                      Method = ""Model Validation"","
"0","                      RMSE = movie_user_genre_year_rmse)"
"0",")"
"0",""
"0","result"
